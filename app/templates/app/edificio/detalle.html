{% extends 'app/base.html' %}
{% load static %}

{% block breadcrumb %}
  <nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a href="{% url 'home' %}">Inicio</a>
      </li>
      <li class="breadcrumb-item">
        <a href="{% url 'listar_edificios' %}">Edificios</a>
      </li>
      <li class="breadcrumb-item active">{{ edificio.nombre }}</li>
    </ol>
  </nav>
{% endblock %}

{% block contenido %}
  <div class="container-fluid">
    <!-- Header del edificio -->
    <div class="card mb-4">
      <div class="card-header bg-primary text-white">
        <div class="d-flex justify-content-between align-items-center">
          <h3 class="mb-0">
            <i class="fas fa-building me-2"></i>
            {{ edificio.nombre }}
          </h3>
          <span class="badge bg-light text-dark">
            {{ total_apartamentos }} apto{{ total_apartamentos|pluralize }} •
            {{ total_propietarios }} propietario{{ total_propietarios|pluralize }}
          </span>
        </div>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6">
            <p>
              <strong>Dirección:</strong> {{ edificio.direccion }}
            </p>
            <p>
              <strong>Administrador:</strong> {{ edificio.nombre_admin }}
            </p>
          </div>
          <div class="col-md-6">
            <p>
              <strong>Apartamentos:</strong> {{ edificio.cant_aptos }}
            </p>
            <p>
              <strong>Bloques:</strong> {{ edificio.cant_bloques }} • <strong>Pisos:</strong> {{ edificio.cant_pisos }}
            </p>
            <p>
              <strong>Piscina:</strong> {% if edificio.piscina %}
                Sí
              {% else %}
                No
              {% endif %}
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Tarjetas de acceso rápido -->
    <div class="row mb-4">
      <div class="col-md-6">
        <div class="card text-center h-100">
          <div class="card-body">
            <i class="fas fa-home fa-3x text-success mb-3"></i>
            <h4>Apartamentos</h4>
            <p class="text-muted">Gestiona los apartamentos de este edificio</p>
            <div class="d-grid gap-2">
              <a href="{% url 'listar_apartamentos_edificio' edificio.id %}" class="btn btn-success"><i class="fas fa-list me-1"></i> Ver Apartamentos</a>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="card text-center h-100">
          <div class="card-body">
            <i class="fas fa-users fa-3x text-info mb-3"></i>
            <h4>Propietarios</h4>
            <p class="text-muted">Gestiona los propietarios de este edificio</p>
            <div class="d-grid gap-2">
              <a href="{% url 'listar_propietarios_edificio' edificio.id %}" class="btn btn-info text-white"><i class="fas fa-list me-1"></i> Ver Propietarios</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Información adicional -->
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">Resumen del Edificio</h5>
          </div>
          <div class="card-body">
            <div class="row text-center">
              <div class="col-md-3">
                <div class="border rounded p-3">
                  <h3>{{ total_apartamentos }}</h3>
                  <p class="text-muted mb-0">Total Apartamentos Registrados</p>
                </div>
              </div>
              <div class="col-md-3">
                <div class="border rounded p-3">
                  <h3>{{ total_propietarios }}</h3>
                  <p class="text-muted mb-0">Propietarios</p>
                </div>
              </div>
              <div class="col-md-3">
                <div class="border rounded p-3">
                  <h3>{{ edificio.cant_bloques }}</h3>
                  <p class="text-muted mb-0">Bloques</p>
                </div>
              </div>
              <div class="col-md-3">
                <div class="border rounded p-3">
                  <h3>{{ edificio.cant_pisos }}</h3>
                  <p class="text-muted mb-0">Pisos</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
